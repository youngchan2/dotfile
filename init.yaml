---
- name: Initialize dotfiles
  hosts: localhost
  connection: local
  vars_files:
    - version.yaml
  vars:
    dotfile_home: "{{ ansible_facts.env.HOME }}/dotfile"
    binary_home: "{{ ansible_facts.env.LOCAL_BINARY_HOME | default(ansible_facts.env.HOME ~ '/.local/bin') }}"
    data_home: "{{ ansible_facts.env.XDG_DATA_HOME | default(ansible_facts.env.HOME ~ '/.local/share') }}"
    config_home: "{{ ansible_facts.env.XDG_CONFIG_HOME | default(ansible_facts.env.HOME ~ '/.config') }}"
  tasks:
    - name: Install Linux packages
      ansible.builtin.import_tasks: task/install/linux/base.yaml
      tags: install
      when: ansible_facts['system'] == 'Linux'
    - name: Install Darwin packages
      ansible.builtin.import_tasks: task/install/darwin/base.yaml
      tags: install
      when: ansible_facts['system'] == 'Darwin'
    - name: Configure dotfiles
      ansible.builtin.import_tasks: task/configure/base.yaml
      tags: configure
